(()=>{"use strict";const e=window.wp.blocks,t=window.React,l=window.wp.blockEditor,a=window.wp.components,o=window.wp.i18n,n=window.wp.element;(0,e.registerBlockType)("gutenberg-blocks/product-slider",{edit:function({attributes:e,setAttributes:r}){const[c,i]=(0,n.useState)([]),[s,d]=(0,n.useState)([]),[g,m]=(0,n.useState)(!0),{title:p,productsPerSlide:u,autoPlay:b,showNavigation:w,showPagination:_,category:h,orderBy:E,order:v}=e;(0,n.useEffect)((()=>{window.wp&&window.wp.apiFetch&&window.wp.apiFetch({path:"/wc/v3/products/categories?per_page=100"}).then((e=>{i(e)})).catch((e=>{console.error("Error fetching categories:",e)}))}),[]),(0,n.useEffect)((()=>{if(window.wp&&window.wp.apiFetch){m(!0);let e="/wc/v3/products?per_page=6&status=publish";h&&(e+=`&category=${h}`),e+=`&orderby=${E}&order=${v}`,window.wp.apiFetch({path:e}).then((e=>{d(e),m(!1)})).catch((e=>{console.error("Error fetching products:",e),m(!1)}))}}),[h,E,v]);const k=[{label:(0,o.__)("All Categories","gblocks"),value:""},...c.map((e=>({label:e.name,value:e.id.toString()})))],C=[{label:(0,o.__)("Date","gblocks"),value:"date"},{label:(0,o.__)("Title","gblocks"),value:"title"},{label:(0,o.__)("Price","gblocks"),value:"price"},{label:(0,o.__)("Popularity","gblocks"),value:"popularity"},{label:(0,o.__)("Rating","gblocks"),value:"rating"}],y=[{label:(0,o.__)("Descending","gblocks"),value:"DESC"},{label:(0,o.__)("Ascending","gblocks"),value:"ASC"}];return(0,t.createElement)("div",{...(0,l.useBlockProps)()},(0,t.createElement)(l.InspectorControls,null,(0,t.createElement)(a.PanelBody,{title:(0,o.__)("Slider Settings","gblocks"),initialOpen:!0},(0,t.createElement)(a.TextControl,{label:(0,o.__)("Slider Title","gblocks"),value:p,onChange:e=>r({title:e}),placeholder:(0,o.__)("Enter slider title...","gblocks")}),(0,t.createElement)(a.RangeControl,{label:(0,o.__)("Products per Slide","gblocks"),value:u,onChange:e=>r({productsPerSlide:e}),min:1,max:6}),(0,t.createElement)(a.ToggleControl,{label:(0,o.__)("Auto Play","gblocks"),checked:b,onChange:e=>r({autoPlay:e})}),(0,t.createElement)(a.ToggleControl,{label:(0,o.__)("Show Navigation Arrows","gblocks"),checked:w,onChange:e=>r({showNavigation:e})}),(0,t.createElement)(a.ToggleControl,{label:(0,o.__)("Show Pagination Dots","gblocks"),checked:_,onChange:e=>r({showPagination:e})})),(0,t.createElement)(a.PanelBody,{title:(0,o.__)("Product Settings","gblocks"),initialOpen:!1},(0,t.createElement)(a.SelectControl,{label:(0,o.__)("Product Category","gblocks"),value:h,options:k,onChange:e=>r({category:e})}),(0,t.createElement)(a.SelectControl,{label:(0,o.__)("Order By","gblocks"),value:E,options:C,onChange:e=>r({orderBy:e})}),(0,t.createElement)(a.SelectControl,{label:(0,o.__)("Order","gblocks"),value:v,options:y,onChange:e=>r({order:e})}))),(0,t.createElement)("div",{className:"product-slider-preview"},(0,t.createElement)("h3",{className:"slider-title"},p||(0,o.__)("WooCommerce Product Slider","gblocks")),g?(0,t.createElement)("div",{className:"slider-loading"},(0,t.createElement)("p",null,(0,o.__)("Loading products...","gblocks"))):(0,t.createElement)("div",{className:"slider-container"},(0,t.createElement)("div",{className:"slider-products",style:{display:"grid",gridTemplateColumns:`repeat(${u}, 1fr)`,gap:"20px"}},s.map((e=>(0,t.createElement)("div",{key:e.id,className:"product-item"},(0,t.createElement)("div",{className:"product-image"},e.images&&e.images[0]?(0,t.createElement)("img",{src:e.images[0].src,alt:e.name,style:{width:"100%",height:"150px",objectFit:"cover"}}):(0,t.createElement)("div",{style:{width:"100%",height:"150px",backgroundColor:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center"}},(0,o.__)("No Image","gblocks"))),(0,t.createElement)("div",{className:"product-info"},(0,t.createElement)("h4",null,e.name),(0,t.createElement)("p",{className:"price"},e.price)))))),w&&(0,t.createElement)("div",{className:"slider-navigation"},(0,t.createElement)("button",{className:"nav-prev"},"‹"),(0,t.createElement)("button",{className:"nav-next"},"›")),_&&(0,t.createElement)("div",{className:"slider-pagination"},(0,t.createElement)("span",{className:"dot active"}),(0,t.createElement)("span",{className:"dot"}),(0,t.createElement)("span",{className:"dot"})))))},save:()=>null})})();