(()=>{"use strict";const e=window.wp.blocks,t=window.React,o=window.wp.blockEditor,n=window.wp.components,r=window.wp.i18n,l=window.wp.element,a=window.wp.data;(0,e.registerBlockType)("blockxpert/product-slider",{edit:function({attributes:e,setAttributes:i}){const[c,s]=(0,l.useState)([]),[d,p]=(0,l.useState)([]),[m,u]=(0,l.useState)(!0),[_,b]=(0,l.useState)(0),{title:g,productsPerSlide:h,autoPlay:k,showNavigation:x,showPagination:w,category:v,orderBy:E,order:y}=e,C=(0,a.useSelect)((e=>{const{__unstableGetPreviewDeviceType:t}=e(o.store);return t?t():"Desktop"}),[]);(0,l.useEffect)((()=>{window.wp&&window.wp.apiFetch&&window.wp.apiFetch({path:"/wc/v3/products/categories?per_page=100"}).then((e=>{s(e)})).catch((e=>{console.error("Error fetching categories:",e)}))}),[]),(0,l.useEffect)((()=>{if(window.wp&&window.wp.apiFetch){u(!0),b(0);let e="/wc/v3/products?per_page=12&status=publish";v&&(e+=`&category=${v}`),e+=`&orderby=${E}&order=${y}`,window.wp.apiFetch({path:e}).then((e=>{p(e),u(!1)})).catch((e=>{console.error("Error fetching products:",e),u(!1)}))}}),[v,E,y]);const f=[{label:(0,r.__)("All Categories","blockxpert"),value:""},...c.map((e=>({label:e.name,value:e.id.toString()})))],S=[{label:(0,r.__)("Date","blockxpert"),value:"date"},{label:(0,r.__)("Title","blockxpert"),value:"title"},{label:(0,r.__)("Price","blockxpert"),value:"price"},{label:(0,r.__)("Popularity","blockxpert"),value:"popularity"},{label:(0,r.__)("Rating","blockxpert"),value:"rating"}],P=[{label:(0,r.__)("Descending","blockxpert"),value:"desc"},{label:(0,r.__)("Ascending","blockxpert"),value:"asc"}],N="Mobile"===C?1:"Tablet"===C?Math.min(2,h):h,A=d.length>0?Math.ceil(d.length/N):0,q=()=>{b((e=>(e+1)%A))};return(0,l.useEffect)((()=>{if(!k||A<=1)return;const e=setInterval(q,5e3);return()=>clearInterval(e)}),[k,A]),(0,t.createElement)("div",{...(0,o.useBlockProps)()},(0,t.createElement)(o.InspectorControls,null,(0,t.createElement)(n.PanelBody,{title:(0,r.__)("Slider Settings","blockxpert"),initialOpen:!0},(0,t.createElement)(n.TextControl,{label:(0,r.__)("Slider Title","blockxpert"),value:g,onChange:e=>i({title:e}),placeholder:(0,r.__)("Enter slider title...","blockxpert")}),(0,t.createElement)(n.RangeControl,{label:(0,r.__)("Products per Slide","blockxpert"),value:h,onChange:e=>i({productsPerSlide:e}),min:1,max:6}),(0,t.createElement)(n.ToggleControl,{label:(0,r.__)("Auto Play","blockxpert"),checked:k,onChange:e=>i({autoPlay:e})}),(0,t.createElement)(n.ToggleControl,{label:(0,r.__)("Show Navigation Arrows","blockxpert"),checked:x,onChange:e=>i({showNavigation:e})}),(0,t.createElement)(n.ToggleControl,{label:(0,r.__)("Show Pagination Dots","blockxpert"),checked:w,onChange:e=>i({showPagination:e})})),(0,t.createElement)(n.PanelBody,{title:(0,r.__)("Product Settings","blockxpert"),initialOpen:!1},(0,t.createElement)(n.SelectControl,{label:(0,r.__)("Product Category","blockxpert"),value:v,options:f,onChange:e=>i({category:e})}),(0,t.createElement)(n.SelectControl,{label:(0,r.__)("Order By","blockxpert"),value:E,options:S,onChange:e=>i({orderBy:e})}),(0,t.createElement)(n.SelectControl,{label:(0,r.__)("Order","blockxpert"),value:y,options:P,onChange:e=>i({order:e})}))),(0,t.createElement)("div",{className:"product-slider-editor-preview"},(0,t.createElement)("h3",{className:"slider-title"},g||(0,r.__)("WooProduct Slider","blockxpert")),m&&(0,t.createElement)(n.Placeholder,{label:(0,r.__)("Loading Products","blockxpert")},(0,t.createElement)("p",null,(0,r.__)("Fetching products for the preview...","blockxpert"))),!m&&0===d.length&&(0,t.createElement)(n.Placeholder,{icon:"woocommerce",label:(0,r.__)("No Products Found","blockxpert"),instructions:(0,r.__)("No products were found. Please check your product visibility, selected category, or try creating new products.","blockxpert")},(0,t.createElement)("a",{className:"components-button is-primary",href:"/wp-admin/post-new.php?post_type=product",target:"_blank",rel:"noopener noreferrer"},(0,r.__)("Create New Product","blockxpert"))),!m&&d.length>0&&(0,t.createElement)("div",{className:"slider-container-preview"},(0,t.createElement)("div",{className:"slider-wrapper-preview"},(0,t.createElement)("div",{className:"slider-track-preview",style:{display:"flex",transition:"transform 0.5s ease-in-out",transform:`translateX(-${100*_}%)`}},d.map((e=>(0,t.createElement)("div",{key:e.id,className:"product-item-preview",style:{flex:`0 0 ${100/N}%`,padding:"0 8px"}},(0,t.createElement)("div",{className:"product-card-preview"},(0,t.createElement)("div",{className:"product-image-preview"},e.images&&e.images[0]?(0,t.createElement)("img",{src:e.images[0].src,alt:e.name}):(0,t.createElement)("div",{className:"product-image-placeholder"},(0,t.createElement)("span",null,(0,r.__)("No Image","blockxpert")))),(0,t.createElement)("div",{className:"product-info-preview"},(0,t.createElement)("h4",{className:"product-title-preview"},e.name),(0,t.createElement)("p",{className:"product-price-preview",dangerouslySetInnerHTML:{__html:e.price_html||e.price}})))))))),x&&A>1&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)("button",{className:"slider-nav-preview prev",onClick:()=>{b((e=>(e-1+A)%A))}},"‹"),(0,t.createElement)("button",{className:"slider-nav-preview next",onClick:q},"›")),w&&A>1&&(0,t.createElement)("div",{className:"slider-pagination-preview"},Array.from({length:A}).map(((e,o)=>(0,t.createElement)("button",{key:o,className:"dot-preview "+(_===o?"active":""),onClick:()=>(e=>{b(e)})(o),"aria-label":`${(0,r.__)("Go to slide","blockxpert")} ${o+1}`})))))),(0,t.createElement)("style",null,"\n                .product-slider-editor-preview .slider-title {\n                    text-align: center;\n                    font-size: 1.5em;\n                    margin-bottom: 1em;\n                }\n                .slider-container-preview {\n                    position: relative;\n                }\n                .slider-wrapper-preview {\n                    overflow: hidden;\n                }\n                .product-card-preview {\n                    border: 1px solid #e0e0e0;\n                    border-radius: 4px;\n                    overflow: hidden;\n                    background: #fff;\n                }\n                .product-image-preview {\n                    width: 100%;\n                    padding-top: 100%; /* 1:1 Aspect Ratio */\n                    position: relative;\n                    background-color: #f0f0f0;\n                }\n                .product-image-preview img {\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    width: 100%;\n                    height: 100%;\n                    object-fit: cover;\n                }\n                .product-image-placeholder {\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    width: 100%;\n                    height: 100%;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    color: #999;\n                }\n                .product-info-preview {\n                    padding: 12px;\n                }\n                .product-title-preview {\n                    font-size: 1em;\n                    margin: 0 0 8px 0;\n                    white-space: nowrap;\n                    overflow: hidden;\n                    text-overflow: ellipsis;\n                }\n                .product-price-preview {\n                    font-size: 0.9em;\n                    font-weight: bold;\n                    color: #2c3e50;\n                    margin: 0;\n                }\n                .slider-nav-preview {\n                    position: absolute;\n                    top: 40%;\n                    transform: translateY(-50%);\n                    background: rgba(255, 255, 255, 0.8);\n                    border: 1px solid #ccc;\n                    border-radius: 50%;\n                    width: 32px;\n                    height: 32px;\n                    cursor: pointer;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    z-index: 10;\n                }\n                .slider-nav-preview.prev { left: -10px; }\n                .slider-nav-preview.next { right: -10px; }\n                .slider-pagination-preview {\n                    text-align: center;\n                    margin-top: 16px;\n                }\n                .dot-preview {\n                    display: inline-block;\n                    width: 10px;\n                    height: 10px;\n                    border-radius: 50%;\n                    background: #ccc;\n                    margin: 0 4px;\n                    border: none;\n                    padding: 0;\n                    cursor: pointer;\n                }\n                .dot-preview.active { background: #333; }\n            "))},save:()=>null});const i=[{name:"Small",slug:"small",size:"14px"},{name:"Normal",slug:"normal",size:"16px"},{name:"Large",slug:"large",size:"20px"},{name:"Extra Large",slug:"extra-large",size:"24px"}];(0,e.registerBlockType)("blockxpert/ai-faq",{edit:function({attributes:e,setAttributes:a}){const c=(0,o.useBlockProps)(),[s,d]=(0,l.useState)(!1),[p,m]=(0,l.useState)(""),[u,_]=(0,l.useState)(null),[b,g]=(0,l.useState)(new Set),[h,k]=(0,l.useState)(""),{title:x,aiEnabled:w,maxQuestions:v,autoGenerate:E,showSearch:y,accordionStyle:C,questions:f,apiKey:S,model:P,titleColor:N,questionColor:A,answerColor:q,titleFontSize:T,questionFontSize:I,answerFontSize:z,animationType:B,animationDuration:F}=e,O={color:N,fontSize:T},R={color:A,fontSize:I},Q={color:q,fontSize:z},D=()=>{const e={question:"",answer:"",id:Date.now()};a({questions:[...f,e]}),_(e.id)},G=(e,t,o)=>{const n=[...f];n[e]={...n[e],[t]:o},a({questions:n})},M=async()=>{d(!0),m("");try{console.log("Generating AI questions with API Key:",S),await new Promise((e=>setTimeout(e,1500)));const e=[{question:"What is BlockXpert?",answer:"BlockXpert is a powerful suite of blocks for the WordPress editor.",id:Date.now()+1},{question:"How do I get an API key?",answer:"You can get an API key from the OpenAI website.",id:Date.now()+2}];a({questions:[...f,...e]}),m((0,r.__)("FAQ questions generated successfully!","blockxpert"))}catch(e){console.error("Error generating questions:",e),m((0,r.__)("Error generating questions. Please try again.","blockxpert"))}d(!1)},$=f.filter((e=>e.question.toLowerCase().includes(h.toLowerCase())));return(0,t.createElement)("div",{...c},(0,t.createElement)(o.InspectorControls,null,(0,t.createElement)(n.PanelBody,{title:(0,r.__)("FAQ Settings","blockxpert"),initialOpen:!0},(0,t.createElement)(n.TextControl,{label:(0,r.__)("FAQ Title","blockxpert"),value:x,onChange:e=>a({title:e}),placeholder:(0,r.__)("Enter FAQ title...","blockxpert")}),(0,t.createElement)(n.ToggleControl,{label:(0,r.__)("Enable AI Generation","blockxpert"),checked:w,onChange:e=>a({aiEnabled:e}),__nextHasNoMarginBottom:!0}),w&&(0,t.createElement)(n.ToggleControl,{label:(0,r.__)("Auto Generate Questions on page load","blockxpert"),checked:E,onChange:e=>a({autoGenerate:e}),__nextHasNoMarginBottom:!0,help:(0,r.__)("Automatically generate questions when the block is added.","blockxpert")}),(0,t.createElement)(n.ToggleControl,{label:(0,r.__)("Show Search Bar","blockxpert"),checked:y,onChange:e=>a({showSearch:e}),__nextHasNoMarginBottom:!0})),(0,t.createElement)(o.PanelColorSettings,{title:(0,r.__)("Color Settings","blockxpert"),initialOpen:!1,colorSettings:[{value:N,onChange:e=>a({titleColor:e}),label:(0,r.__)("Title Color","blockxpert")},{value:A,onChange:e=>a({questionColor:e}),label:(0,r.__)("Question Color","blockxpert")},{value:q,onChange:e=>a({answerColor:e}),label:(0,r.__)("Answer Color","blockxpert")}]}),(0,t.createElement)(n.PanelBody,{title:(0,r.__)("Font Size Settings","blockxpert"),initialOpen:!1},(0,t.createElement)("p",{className:"components-base-control__label"},(0,r.__)("Title Font Size","blockxpert")),(0,t.createElement)(n.FontSizePicker,{fontSizes:i,value:T,onChange:e=>a({titleFontSize:e}),withSlider:!0}),(0,t.createElement)("p",{className:"components-base-control__label"},(0,r.__)("Question Font Size","blockxpert")),(0,t.createElement)(n.FontSizePicker,{fontSizes:i,value:I,onChange:e=>a({questionFontSize:e}),withSlider:!0}),(0,t.createElement)("p",{className:"components-base-control__label"},(0,r.__)("Answer Font Size","blockxpert")),(0,t.createElement)(n.FontSizePicker,{fontSizes:i,value:z,onChange:e=>a({answerFontSize:e}),withSlider:!0})),(0,t.createElement)(n.PanelBody,{title:(0,r.__)("Animation Settings","blockxpert"),initialOpen:!1},(0,t.createElement)(n.RangeControl,{label:(0,r.__)("Animation Duration (ms)","blockxpert"),value:F,onChange:e=>a({animationDuration:e}),min:100,max:1e3,step:50})),w&&(0,t.createElement)(n.PanelBody,{title:(0,r.__)("AI Settings","blockxpert"),initialOpen:!1},(0,t.createElement)(n.TextControl,{label:(0,r.__)("OpenAI API Key","blockxpert"),value:S,onChange:e=>a({apiKey:e}),placeholder:(0,r.__)("Enter your OpenAI API key...","blockxpert"),help:S?"":(0,r.__)("An API key is required for AI features.","blockxpert"),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,t.createElement)(n.TextControl,{label:(0,r.__)("AI Model","blockxpert"),value:P,onChange:e=>a({model:e})}),(0,t.createElement)(n.RangeControl,{label:(0,r.__)("Maximum Questions to Generate","blockxpert"),value:v,onChange:e=>a({maxQuestions:e}),min:1,max:10}),(0,t.createElement)(n.Button,{isPrimary:!0,onClick:M,isBusy:s,disabled:!S||s},s?(0,r.__)("Generating...","blockxpert"):(0,r.__)("Generate AI Questions","blockxpert")))),(0,t.createElement)("div",{className:"ai-faq-editor"},(0,t.createElement)("h2",{className:"faq-title",style:O},x||(0,r.__)("AI FAQ","blockxpert")),p&&(0,t.createElement)(n.Notice,{status:p.includes("successfully")?"success":"error",onRemove:()=>m("")},p),y&&(0,t.createElement)("div",{className:"faq-search"},(0,t.createElement)(n.TextControl,{placeholder:(0,r.__)("Search questions...","blockxpert"),value:h,onChange:k,__next40pxDefaultSize:!0})),f&&0!==f.length?(0,t.createElement)("div",{className:"faq-questions"},$.map(((e,l)=>(0,t.createElement)("div",{key:e.id||l,className:"faq-question"},u===e.id?(0,t.createElement)("div",{className:"faq-edit-form"},(0,t.createElement)(n.TextControl,{label:(0,r.__)("Question","blockxpert"),value:e.question,onChange:e=>G(l,"question",e),placeholder:(0,r.__)("Enter your question...","blockxpert")}),(0,t.createElement)(o.PanelColorSettings,{title:(0,r.__)("Question Color","blockxpert"),colorSettings:[{value:e.questionColor,onChange:e=>G(l,"questionColor",e),label:(0,r.__)("Question Color","blockxpert")}]}),(0,t.createElement)(n.FontSizePicker,{fontSizes:i,value:e.questionFontSize,onChange:e=>G(l,"questionFontSize",e),withSlider:!0,label:(0,r.__)("Question Font Size","blockxpert")}),(0,t.createElement)(n.TextareaControl,{label:(0,r.__)("Answer","blockxpert"),value:e.answer,onChange:e=>G(l,"answer",e),placeholder:(0,r.__)("Enter your answer...","blockxpert"),rows:4}),(0,t.createElement)(o.PanelColorSettings,{title:(0,r.__)("Answer Color","blockxpert"),colorSettings:[{value:e.answerColor,onChange:e=>G(l,"answerColor",e),label:(0,r.__)("Answer Color","blockxpert")}]}),(0,t.createElement)(n.FontSizePicker,{fontSizes:i,value:e.answerFontSize,onChange:e=>G(l,"answerFontSize",e),withSlider:!0,label:(0,r.__)("Answer Font Size","blockxpert")}),(0,t.createElement)("div",{className:"faq-edit-actions"},(0,t.createElement)(n.Button,{isPrimary:!0,onClick:()=>_(null)},(0,r.__)("Save","blockxpert")),(0,t.createElement)(n.Button,{isDestructive:!0,onClick:()=>{_(null),(e=>{const t=f.filter(((t,o)=>o!==e));a({questions:t})})(l)}},(0,r.__)("Delete","blockxpert")))):(0,t.createElement)("div",{className:"faq-question-content"},(0,t.createElement)("div",{className:"faq-question-header",onClick:()=>(e=>{const t=new Set(b);t.has(e)?t.delete(e):t.add(e),g(t)})(l)},(0,t.createElement)("h3",{className:"faq-question-text",style:{...R,color:e.questionColor||R.color,fontSize:e.questionFontSize||R.fontSize}},e.question||(0,r.__)("Untitled Question","blockxpert")),(0,t.createElement)("div",{className:"faq-question-actions"},(0,t.createElement)(n.Button,{isSmall:!0,variant:"secondary",onClick:t=>{t.stopPropagation(),_(e.id)}},(0,r.__)("Edit","blockxpert")),(0,t.createElement)("span",{className:"faq-toggle-icon "+(b.has(l)?"open":"")},"+"))),(0,t.createElement)("div",{className:"faq-answer "+(b.has(l)?"is-open":""),style:{transitionDuration:`${F}ms`,maxHeight:b.has(l)?"500px":"0"}},(0,t.createElement)("p",{style:{...Q,color:e.answerColor||Q.color,fontSize:e.answerFontSize||Q.fontSize}},e.answer||(0,r.__)("No answer provided.","blockxpert"))))))),(0,t.createElement)("div",{className:"faq-actions"},(0,t.createElement)(n.Button,{variant:"primary",onClick:D},(0,r.__)("Add Question","blockxpert")),w&&(0,t.createElement)(n.Button,{variant:"secondary",onClick:M,isBusy:s,disabled:!S},(0,r.__)("Generate More AI Questions","blockxpert")))):(0,t.createElement)(n.Placeholder,{icon:"editor-help",label:(0,r.__)("No FAQ Questions","blockxpert"),instructions:(0,r.__)("Add your first FAQ question or generate AI-powered questions.","blockxpert")},(0,t.createElement)("div",{className:"faq-placeholder-actions"},(0,t.createElement)(n.Button,{isPrimary:!0,onClick:D},(0,r.__)("Add Question","blockxpert")),w&&(0,t.createElement)(n.Button,{onClick:M,isBusy:s,disabled:!S},(0,r.__)("Generate AI Questions","blockxpert"))))))},save:()=>null}),(0,e.registerBlockType)("blockxpert/ai-product-recommendations",{edit:function({attributes:e,setAttributes:i}){const[c,s]=(0,l.useState)(!1),[d,p]=(0,l.useState)(""),[m,u]=(0,l.useState)([]),[_,b]=(0,l.useState)(null),{title:g,aiEnabled:h,recommendationType:k,layoutStyle:x,productsCount:w,theme:v,showPrice:E,showRating:y,showAddToCart:C,inStockOnly:f,excludeCurrent:S,priceRange:P,customPrompt:N,apiKey:A,model:q,cacheEnabled:T,cacheDuration:I,currentProductId:z,recommendedProducts:B}=e,F=(0,a.useSelect)((e=>e("core/editor")?.getCurrentPostId()||0),[]),O=(0,a.useSelect)((e=>e("core/editor")?.getCurrentPostType()||""),[]);(0,l.useEffect)((()=>{"product"===O&&F&&(setCurrentProductId(F),R(F))}),[F,O]);const R=async e=>{if(window.wp&&window.wp.apiFetch)try{const t=await window.wp.apiFetch({path:`/wc/v3/products/${e}`});b(t)}catch(e){console.error("Error fetching current product:",e)}};(0,l.useEffect)((()=>{window.wp&&window.wp.apiFetch&&Q()}),[]);const Q=async()=>{try{const e=await window.wp.apiFetch({path:"/wc/v3/products?per_page=8&status=publish"});u(e)}catch(e){console.error("Error fetching products:",e)}},D=async()=>{if(A)if(_||"product"!==O){s(!0);try{const e=await fetch("/wp-json/blockxpert/v1/generate-product-recommendations",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},body:JSON.stringify({apiKey:A,model:q,currentProduct:_,recommendationType:k,productsCount:w,customPrompt:N,priceRange:P,inStockOnly:f})});if(e.ok){const t=await e.json();t.success&&t.products?(i({recommendedProducts:t.products}),p((0,r.__)("AI recommendations generated successfully!","blockxpert"))):p((0,r.__)("Failed to generate recommendations. Please check your API key.","blockxpert"))}else p((0,r.__)("Error generating recommendations. Please try again.","blockxpert"))}catch(e){console.error("Error generating recommendations:",e),p((0,r.__)("Error generating recommendations. Please try again.","blockxpert"))}finally{s(!1)}}else alert((0,r.__)("Please wait for the current product to load, then try again.","blockxpert"));else alert((0,r.__)("Please enter your OpenAI API key in the block settings.","blockxpert"))},G=B.length>0?B:m.slice(0,w);return(0,t.createElement)("div",{...(0,o.useBlockProps)({className:`ai-product-recommendations theme-${v}`})},(0,t.createElement)(o.InspectorControls,null,(0,t.createElement)(n.PanelBody,{title:(0,r.__)("Recommendation Settings","blockxpert"),initialOpen:!0},(0,t.createElement)(n.TextControl,{label:(0,r.__)("Section Title","blockxpert"),value:g,onChange:e=>i({title:e}),placeholder:(0,r.__)("Enter section title...","blockxpert")}),(0,t.createElement)(n.ToggleControl,{label:(0,r.__)("Enable AI Recommendations","blockxpert"),checked:h,onChange:e=>i({aiEnabled:e})}),(0,t.createElement)(n.SelectControl,{label:(0,r.__)("Recommendation Type","blockxpert"),value:k,options:[{label:(0,r.__)("Related Products","blockxpert"),value:"related"},{label:(0,r.__)("Cross-Sells","blockxpert"),value:"cross-sell"},{label:(0,r.__)("Upsells","blockxpert"),value:"upsell"},{label:(0,r.__)("Custom","blockxpert"),value:"custom"}],onChange:e=>i({recommendationType:e})}),"custom"===k&&(0,t.createElement)(n.TextControl,{label:(0,r.__)("Custom Prompt","blockxpert"),value:N,onChange:e=>i({customPrompt:e}),placeholder:(0,r.__)('e.g., "gift ideas", "trending items", "best sellers"',"blockxpert")})),(0,t.createElement)(n.PanelBody,{title:(0,r.__)("Display Settings","blockxpert"),initialOpen:!1},(0,t.createElement)(n.SelectControl,{label:(0,r.__)("Layout Style","blockxpert"),value:x,options:[{label:(0,r.__)("Grid","blockxpert"),value:"grid"},{label:(0,r.__)("List","blockxpert"),value:"list"},{label:(0,r.__)("Slider","blockxpert"),value:"slider"}],onChange:e=>i({layoutStyle:e})}),(0,t.createElement)(n.RangeControl,{label:(0,r.__)("Number of Products","blockxpert"),value:w,onChange:e=>i({productsCount:e}),min:1,max:12}),(0,t.createElement)(n.SelectControl,{label:(0,r.__)("Theme","blockxpert"),value:v,options:[{label:(0,r.__)("Light","blockxpert"),value:"light"},{label:(0,r.__)("Dark","blockxpert"),value:"dark"},{label:(0,r.__)("Minimal","blockxpert"),value:"minimal"}],onChange:e=>i({theme:e})})),(0,t.createElement)(n.PanelBody,{title:(0,r.__)("Product Display","blockxpert"),initialOpen:!1},(0,t.createElement)(n.ToggleControl,{label:(0,r.__)("Show Price","blockxpert"),checked:E,onChange:e=>i({showPrice:e})}),(0,t.createElement)(n.ToggleControl,{label:(0,r.__)("Show Rating","blockxpert"),checked:y,onChange:e=>i({showRating:e})}),(0,t.createElement)(n.ToggleControl,{label:(0,r.__)("Show Add to Cart Button","blockxpert"),checked:C,onChange:e=>i({showAddToCart:e})})),(0,t.createElement)(n.PanelBody,{title:(0,r.__)("AI Settings","blockxpert"),initialOpen:!1},(0,t.createElement)(n.TextControl,{label:(0,r.__)("OpenAI API Key","blockxpert"),value:A,onChange:e=>i({apiKey:e}),type:"password",placeholder:(0,r.__)("Enter your OpenAI API key...","blockxpert")}),(0,t.createElement)(n.SelectControl,{label:(0,r.__)("AI Model","blockxpert"),value:q,options:[{label:"GPT-3.5 Turbo",value:"gpt-3.5-turbo"},{label:"GPT-4",value:"gpt-4"},{label:"GPT-4 Turbo",value:"gpt-4-turbo-preview"}],onChange:e=>i({model:e})}),(0,t.createElement)(n.ToggleControl,{label:(0,r.__)("In Stock Only","blockxpert"),checked:f,onChange:e=>i({inStockOnly:e})}),(0,t.createElement)(n.ToggleControl,{label:(0,r.__)("Exclude Current Product","blockxpert"),checked:S,onChange:e=>i({excludeCurrent:e})}),h&&(0,t.createElement)(n.Button,{isPrimary:!0,onClick:D,isBusy:c,disabled:!A},c?(0,r.__)("Generating...","blockxpert"):(0,r.__)("Generate AI Recom","blockxpert")))),(0,t.createElement)("div",{className:"ai-product-recommendations-editor"},(0,t.createElement)("h2",{className:"recommendations-title"},g||(0,r.__)("Ai Product Recom","blockxpert")),(0,t.createElement)("style",null,"\n                        .ai-product-recommendations-editor .product-price {\n                            font-size: 1.2rem;\n                            font-weight: 600;\n                            color: #007cba;\n                            margin-bottom: 0.5rem;\n                        }\n                        .ai-product-recommendations-editor .woocommerce-Price-amount {\n                            font-weight: 600;\n                        }\n                        .ai-product-recommendations-editor .woocommerce-Price-currencySymbol {\n                            font-weight: normal;\n                        }\n                        .ai-product-recommendations-editor .product-card {\n                            border: 1px solid #e1e5e9;\n                            border-radius: 8px;\n                            overflow: hidden;\n                            transition: all 0.3s ease;\n                            background: #fff;\n                            margin-bottom: 1rem;\n                        }\n                        .ai-product-recommendations-editor .product-image {\n                            position: relative;\n                            overflow: hidden;\n                        }\n                        .ai-product-recommendations-editor .product-thumbnail {\n                            width: 100%;\n                            height: 200px;\n                            object-fit: cover;\n                        }\n                        .ai-product-recommendations-editor .product-info {\n                            padding: 1rem;\n                        }\n                        .ai-product-recommendations-editor .product-title {\n                            margin: 0 0 0.5rem 0;\n                            font-size: 1.1rem;\n                            font-weight: 500;\n                        }\n                        .ai-product-recommendations-editor .product-rating {\n                            margin-bottom: 0.5rem;\n                        }\n                        .ai-product-recommendations-editor .add-to-cart-btn {\n                            width: 100%;\n                            margin-top: 0.5rem;\n                        }\n                        .ai-product-recommendations-editor .products-grid {\n                            display: grid;\n                            gap: 1.5rem;\n                        }\n                        .ai-product-recommendations-editor .products-grid.layout-grid {\n                            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n                        }\n                        .ai-product-recommendations-editor .products-grid.layout-list {\n                            grid-template-columns: 1fr;\n                        }\n                        .ai-product-recommendations-editor .products-grid.layout-slider {\n                            display: flex;\n                            overflow-x: auto;\n                            gap: 1rem;\n                            padding: 1rem 0;\n                        }\n                        .ai-product-recommendations-editor .products-grid.layout-slider .product-card {\n                            flex: 0 0 250px;\n                        }\n                    "),d&&(0,t.createElement)(n.Notice,{status:d.includes("successfully")?"success":"error",onRemove:()=>p("")},d),_&&(0,t.createElement)("div",{className:"current-product-info"},(0,t.createElement)("h4",null,(0,r.__)("Current Product:","blockxpert")),(0,t.createElement)("p",null,_.name),(0,t.createElement)("p",null,(0,r.__)("Type:","blockxpert")," ",(M=k,{related:(0,r.__)("Related Products","blockxpert"),"cross-sell":(0,r.__)("Cross-Sells","blockxpert"),upsell:(0,r.__)("Upsells","blockxpert"),custom:(0,r.__)("Custom Recommendations","blockxpert")}[M]||M))),0===G.length?(0,t.createElement)(n.Placeholder,{icon:"products",label:(0,r.__)("No Products Found","blockxpert"),instructions:(0,r.__)("No products available for recommendations. Add products to your store or generate AI recommendations.","blockxpert")},h&&(0,t.createElement)(n.Button,{isPrimary:!0,onClick:D,isBusy:c,disabled:!A},(0,r.__)("Generate AI Recommendations","blockxpert"))):(0,t.createElement)("div",{className:`recommendations-container layout-${x}`},(0,t.createElement)("div",{className:`products-grid layout-${x}`},G.map(((e,o)=>((e,o)=>{const l="product-card "+("slider"===x?"slider-item":"");return(0,t.createElement)("div",{key:e.id||o,className:l},(0,t.createElement)("div",{className:"product-image"},e.images&&e.images[0]?(0,t.createElement)("img",{src:e.images[0].src,alt:e.name,className:"product-thumbnail"}):(0,t.createElement)("div",{className:"product-placeholder"},(0,r.__)("No Image","blockxpert"))),(0,t.createElement)("div",{className:"product-info"},(0,t.createElement)("h3",{className:"product-title"},e.name),E&&(0,t.createElement)("div",{className:"product-price"},e.price_html?(0,t.createElement)("div",{dangerouslySetInnerHTML:{__html:e.price_html}}):e.price||(0,r.__)("Price not available","blockxpert")),y&&e.average_rating&&(0,t.createElement)("div",{className:"product-rating"},"★".repeat(Math.round(e.average_rating)),(0,t.createElement)("span",{className:"rating-count"},"(",e.review_count,")")),C&&"instock"===e.stock_status&&(0,t.createElement)(n.Button,{isPrimary:!0,className:"add-to-cart-btn"},(0,r.__)("Add to Cart","blockxpert"))))})(e,o)))),h&&(0,t.createElement)("div",{className:"ai-actions"},(0,t.createElement)(n.Button,{onClick:D,isBusy:c,disabled:!A},(0,r.__)("Regenerate AI Recommendations","blockxpert"))))));var M},save:()=>null})})();